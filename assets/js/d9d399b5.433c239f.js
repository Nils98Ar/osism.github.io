"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[6149],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(a),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return a?n.createElement(k,i(i({ref:t},p),{},{components:a})):n.createElement(k,i({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7223:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_label:"Testbed",sidebar_position:11},i="Testbed",o={unversionedId:"advanced-guides/testbed",id:"advanced-guides/testbed",title:"Testbed",description:"\ud83d\udca1 With the Testbed, it is possible to run a full OSISM installation on an existing OpenStack environment",source:"@site/docs/advanced-guides/testbed.md",sourceDirName:"advanced-guides",slug:"/advanced-guides/testbed",permalink:"/docs/advanced-guides/testbed",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/advanced-guides/testbed.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_label:"Testbed",sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"Cloud in a Box",permalink:"/docs/advanced-guides/cloud-in-a-box"},next:{title:"Contributor Guide",permalink:"/docs/advanced-guides/contributor-guide"}},s={},u=[{value:"Supported releases",id:"supported-releases",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Cloud access",id:"cloud-access",level:3},{value:"Cloud resources",id:"cloud-resources",level:3},{value:"Software",id:"software",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Includes services",id:"includes-services",level:3},{value:"Infrastructure",id:"infrastructure",level:4},{value:"OpenStack",id:"openstack",level:4}],p={toc:u},d="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"testbed"},"Testbed"),(0,r.kt)("p",null,"\ud83d\udca1 With the Testbed, it is possible to run a full OSISM installation on an existing OpenStack environment\nsuch as Cleura or REGIO.cloud."),(0,r.kt)("p",null,"The OSISM Testbed is intended as a playground. Further services and integration will be added over time. More and\nmore best practices and experiences from the productive installations will be included here in the future.\nIt will become more production-like over time. However, at no point does it claim to represent a production\nsetup exactly."),(0,r.kt)("p",null,"For the German-speaking readers, ",(0,r.kt)("a",{parentName:"p",href:"https://www.osism.tech/files/ix.2020.12.048_059.pdf_kiosk.pdf"},"iX 2020/12")," contains an article\nby Kurt Garloff titled ",(0,r.kt)("a",{parentName:"p",href:"https://www.osism.tech/files/ix.2020.12.048_059.pdf_kiosk.pdf"},"Wolken-Verbund"),", in which, among other\nthings, the OSISM Testbed is briefly introduced."),(0,r.kt)("h2",{id:"supported-releases"},"Supported releases"),(0,r.kt)("p",null,"The following stable Ceph and OpenStack releases are supported. The development branch usually works too."),(0,r.kt)("p",null,"The deployment of Ceph is based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ceph/ceph-ansible"},"ceph-ansible"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ceph Pacific"),(0,r.kt)("li",{parentName:"ul"},"Ceph Quincy (",(0,r.kt)("strong",{parentName:"li"},"default"),")")),(0,r.kt)("p",null,"The deployment of OpenStack is based on ",(0,r.kt)("a",{parentName:"p",href:"https://opendev.org/openstack/kolla-ansible"},"kolla-ansible"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"OpenStack Zed"),(0,r.kt)("li",{parentName:"ul"},"OpenStack 2023.1 (",(0,r.kt)("strong",{parentName:"li"},"default"),")")),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("h3",{id:"cloud-access"},"Cloud access"),(0,r.kt)("p",null,"The prerequisite is to have an account on one of the supported OpenStack cloud providers.\nIt is not part of this guide to describe the registration with the individual cloud\nproviders. Please contact the respective cloud provider for this."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Product"),(0,r.kt)("th",{parentName:"tr",align:null},"Provider"),(0,r.kt)("th",{parentName:"tr",align:null},"Profile name"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Cleura"),(0,r.kt)("td",{parentName:"tr",align:null},"Cleura"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"cleura"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Fuga Cloud"),(0,r.kt)("td",{parentName:"tr",align:null},"FUGA"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"fuga"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HuaweiCloud"),(0,r.kt)("td",{parentName:"tr",align:null},"HuaweiCloud"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"huaweicloud"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OVH"),(0,r.kt)("td",{parentName:"tr",align:null},"OVH"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"ovh"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"OpenTelekomCloud"),(0,r.kt)("td",{parentName:"tr",align:null},"T-Systems"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"otc"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pluscloud open"),(0,r.kt)("td",{parentName:"tr",align:null},"plusserver"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"pluscloudopen"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"REGIO.cloud"),(0,r.kt)("td",{parentName:"tr",align:null},"OSISM"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"regiocloud"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Wavestack"),(0,r.kt)("td",{parentName:"tr",align:null},"noris network"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"wavestack"))))),(0,r.kt)("h3",{id:"cloud-resources"},"Cloud resources"),(0,r.kt)("p",null,"To use the OSISM Testbed, a project on an OpenStack cloud environment is required."),(0,r.kt)("p",null,"The OSISM Testbed requires the following virtual resources when using the default flavors:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1 keypair"),(0,r.kt)("li",{parentName:"ul"},"6 security groups (50 security group rules)"),(0,r.kt)("li",{parentName:"ul"},"6 networks with 6 subnetworks"),(0,r.kt)("li",{parentName:"ul"},"1 router"),(0,r.kt)("li",{parentName:"ul"},"30 ports"),(0,r.kt)("li",{parentName:"ul"},"1 floating IP address"),(0,r.kt)("li",{parentName:"ul"},"9 volumes (min 90 GB) plus 140GB root disks (depends on flavors)"),(0,r.kt)("li",{parentName:"ul"},"4 instances (with 28 VCPUs and 104 GByte memory in total)")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If the cloud you are using does not offer a block storage service (Cinder), you can work with\nephemeral volumes from the compute service (Nova).")),(0,r.kt)("h3",{id:"software"},"Software"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"make")," must be installed on the system"),(0,r.kt)("li",{parentName:"ul"},"Ansible in a current version must be installed and usable on the local workstation. Currently Ansible 8 is supported.\nInformation on installing Ansible can be found in the ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html"},"Ansible\ndocumentation")),(0,r.kt)("li",{parentName:"ul"},"Terraform in a current version must be installed and usable on the local workstation. Currently Terraform 1.5 is supported.\nInformation on installing Terraform can be found in the ",(0,r.kt)("a",{parentName:"li",href:"https://learn.hashicorp.com/tutorials/terraform/install-cli"},"Terraform\ndocumentation"))),(0,r.kt)("h2",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Getting Started")," chapter describes step by step how to install the OSISM Testbed."),(0,r.kt)("p",null,"The first step is to clone the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/osism/testbed"},"osism/testbed")," repository."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"mkdir -p ~/src/github.com/osism\ngit clone https://github.com/osism/testbed ~/src/github.com/osism/testbed\n")),(0,r.kt)("p",null,"The repository can also be cloned to any other location. The path to this repository can later be\nset via the parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"basepath"),"."),(0,r.kt)("p",null,"In the following, OpenTelekomCloud is used as an example. The cloud name in ",(0,r.kt)("inlineCode",{parentName:"p"},"clouds.yaml"),"\nand the environment name (value of ",(0,r.kt)("inlineCode",{parentName:"p"},"ENVIRONMENT"),") are ",(0,r.kt)("inlineCode",{parentName:"p"},"otc")," in this case. If another cloud\nis used, replace ",(0,r.kt)("inlineCode",{parentName:"p"},"otc")," with the respective profile name from the table above."),(0,r.kt)("p",null,"The access data for the cloud provider used is then stored in ",(0,r.kt)("inlineCode",{parentName:"p"},"terraform/clouds.yaml"),".\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"clouds.yaml")," file is provided by the cloud provider used. Please check the documentation\nof the cloud provider you are using or their support for details."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"clouds:\n  otc:\n    auth:\n      auth_url: https://iam.eu-de.otc.t-systems.com:443/v3\n      project_name: eu-de\n      user_domain_name: OTC-EU-DE-00000000000000000000\n      domain_name: OTC-EU-DE-00000000000000000000\n      username: USERNAME\n      password: PASSWORD\n    interface: public\n    identity_api_version: 3\n")),(0,r.kt)("p",null,"The use of application credentials is preferred. This way it is not necessary to store\ndetails like username or project name or sensitive information like the password in the\n",(0,r.kt)("inlineCode",{parentName:"p"},"clouds.yaml")," file."),(0,r.kt)("p",null,"The application credentials can be found in Horizon under ",(0,r.kt)("strong",{parentName:"p"},"Identity"),". Use ",(0,r.kt)("inlineCode",{parentName:"p"},"OSISM testbed")," as\nname and click ",(0,r.kt)("inlineCode",{parentName:"p"},"Create Application Credential"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"clouds.yaml")," file of Fuga Cloud can be used as an example for the use of\napplication credentials. With another cloud provider, only the ",(0,r.kt)("inlineCode",{parentName:"p"},"auth_url")," must then be changed\naccordingly."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'---\nclouds:\n  fuga:\n    auth:\n      auth_url: https://core.fuga.cloud:5000/v3\n      application_credential_id: "ID"\n      application_credential_secret: "SECRET"\n    interface: public\n    identity_api_version: 3\n    auth_type: "v3applicationcredential"\n')),(0,r.kt)("p",null,"Then everything necessary for the installation is prepared."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make prepare\n")),(0,r.kt)("p",null,"Next, the necessary infrastructure is created with the help of Terraform."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make ENVIRONMENT=otc create\n")),(0,r.kt)("p",null,"Finally, OSISM is installed on the previously created infrastructure. Depending on\nthe cloud, the installation will take some time. Up to two hours is not unusual."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make ENVIRONMENT=otc deploy\n")),(0,r.kt)("p",null,"After the installation, you can log in to the manager via SSH."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make ENVIRONMENT=otc login\n")),(0,r.kt)("p",null,"If you want you can create a test project with a test user after login. It also\ncreates an instance with a volume attached to a network with a router."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"osism apply --environment openstack test\n")),(0,r.kt)("p",null,"When the testbed is no longer needed, it can be deleted."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"make ENVIRONMENT=otc clean\n")),(0,r.kt)("h2",{id:"appendix"},"Appendix"),(0,r.kt)("h3",{id:"includes-services"},"Includes services"),(0,r.kt)("p",null,"The following services can currently be used with this testbed without further adjustments."),(0,r.kt)("h4",{id:"infrastructure"},"Infrastructure"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ceph"),(0,r.kt)("li",{parentName:"ul"},"Fluentd"),(0,r.kt)("li",{parentName:"ul"},"Gnocchi"),(0,r.kt)("li",{parentName:"ul"},"Grafana"),(0,r.kt)("li",{parentName:"ul"},"Haproxy"),(0,r.kt)("li",{parentName:"ul"},"Influxdb"),(0,r.kt)("li",{parentName:"ul"},"Keepalived"),(0,r.kt)("li",{parentName:"ul"},"Keycloak"),(0,r.kt)("li",{parentName:"ul"},"Kubernetes CAPI Management Cluster"),(0,r.kt)("li",{parentName:"ul"},"Mariadb"),(0,r.kt)("li",{parentName:"ul"},"Memcached"),(0,r.kt)("li",{parentName:"ul"},"Netbox"),(0,r.kt)("li",{parentName:"ul"},"Netdata"),(0,r.kt)("li",{parentName:"ul"},"Opensearch"),(0,r.kt)("li",{parentName:"ul"},"Openvswitch"),(0,r.kt)("li",{parentName:"ul"},"Patchman"),(0,r.kt)("li",{parentName:"ul"},"Prometheus exporters"),(0,r.kt)("li",{parentName:"ul"},"Rabbitmq"),(0,r.kt)("li",{parentName:"ul"},"Redis")),(0,r.kt)("h4",{id:"openstack"},"OpenStack"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Barbican"),(0,r.kt)("li",{parentName:"ul"},"Ceilometer"),(0,r.kt)("li",{parentName:"ul"},"Cinder"),(0,r.kt)("li",{parentName:"ul"},"Designate"),(0,r.kt)("li",{parentName:"ul"},"Glance"),(0,r.kt)("li",{parentName:"ul"},"Heat"),(0,r.kt)("li",{parentName:"ul"},"Horizon"),(0,r.kt)("li",{parentName:"ul"},"Ironic"),(0,r.kt)("li",{parentName:"ul"},"Keystone"),(0,r.kt)("li",{parentName:"ul"},"Magnum"),(0,r.kt)("li",{parentName:"ul"},"Manila"),(0,r.kt)("li",{parentName:"ul"},"Neutron"),(0,r.kt)("li",{parentName:"ul"},"Nova (with Libvirt/KVM)"),(0,r.kt)("li",{parentName:"ul"},"Octavia"),(0,r.kt)("li",{parentName:"ul"},"Senlin"),(0,r.kt)("li",{parentName:"ul"},"Skyline")))}c.isMDXComponent=!0}}]);