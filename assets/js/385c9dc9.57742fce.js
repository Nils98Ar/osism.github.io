"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[8334],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),c=u(n),k=o,h=c["".concat(s,".").concat(k)]||c[k]||p[k]||i;return n?r.createElement(h,l(l({ref:t},d),{},{components:n})):r.createElement(h,l({ref:t},d))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,l=new Array(i);l[0]=k;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[c]="string"==typeof e?e:o,l[1]=a;for(var u=2;u<i;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},6936:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>u});var r=n(7462),o=(n(7294),n(3905));const i={sidebar_label:"Configuration repository",sidebar_position:10},l="Configuration repository",a={unversionedId:"getting-started/configuration-repository",id:"getting-started/configuration-repository",title:"Configuration repository",description:"The entire configuration required for OSISM is stored in a monorepo. The initial content",source:"@site/docs/getting-started/configuration-repository.md",sourceDirName:"getting-started",slug:"/getting-started/configuration-repository",permalink:"/docs/getting-started/configuration-repository",draft:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/getting-started/configuration-repository.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_label:"Configuration repository",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/getting-started/"},next:{title:"Guides",permalink:"/docs/guides/"}},s={},u=[{value:"Preparations",id:"preparations",level:2},{value:"Initial creation with Cookiecutter",id:"initial-creation-with-cookiecutter",level:2},{value:"Post-processing",id:"post-processing",level:3},{value:"Notes",id:"notes",level:3},{value:"Parameters",id:"parameters",level:3}],d={toc:u},c="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration-repository"},"Configuration repository"),(0,o.kt)("p",null,"The entire configuration required for OSISM is stored in a monorepo. The initial content\nfor this repository is generated using the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/osism/cfg-cookiecutter"},"cookiecutter"),"."),(0,o.kt)("h2",{id:"preparations"},"Preparations"),(0,o.kt)("p",null,"The content generated by the cookiecutter in the ",(0,o.kt)("inlineCode",{parentName:"p"},"output/configuration")," directory is copied to a new\n(previously created) Git repository and committed. Host and path to the Git repository\nare specified via the ",(0,o.kt)("inlineCode",{parentName:"p"},"git_")," parameters: The ",(0,o.kt)("inlineCode",{parentName:"p"},"git_")," parameters do not specify the path\nto the cookiecutter to use."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  [8/20] git_host (github.com):\n  [9/20] git_port (22):\n  [10/20] git_repository (YOUR_ORG/YOUR_NEW_CONFIGURATION_REPOSITORY): osism/new-environment\n  [11/20] git_username (git):\n  [12/20] git_version (main):\n")),(0,o.kt)("p",null,"In this case, the generated configuration in the ",(0,o.kt)("inlineCode",{parentName:"p"},"output/configuration")," directory is\nstored on GitHub.com in the ",(0,o.kt)("inlineCode",{parentName:"p"},"osism/new-environment")," repository."),(0,o.kt)("h2",{id:"initial-creation-with-cookiecutter"},"Initial creation with Cookiecutter"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ mkdir output\n$ docker run --rm -v $(pwd)/output:/output -it quay.io/osism/cookiecutter\n  [1/20] with_ceph (1):\n  [2/20] ceph_network_backend (192.168.80.0/20):\n  [3/20] ceph_network_frontend (192.168.64.0/20):\n  [4/20] ceph_version (quincy):\n  [5/20] domain (osism.xyz):\n  [6/20] fqdn_external (api.osism.xyz):\n  [7/20] fqdn_internal (api-int.osism.xyz):\n  [8/20] git_host (github.com):\n  [9/20] git_port (22):\n  [10/20] git_repository (YOUR_ORG/YOUR_NEW_CONFIGURATION_REPOSITORY):\n  [11/20] git_username (git):\n  [12/20] git_version (main):\n  [13/20] ip_external (192.168.96.9):\n  [14/20] ip_internal (192.168.32.9):\n  [15/20] manager_version (latest):\n  [16/20] name_server (149.112.112.112):\n  [17/20] ntp_server (de.pool.ntp.org):\n  [18/20] openstack_version (2023.1):\n  [19/20] project_name (configuration):\n[...]\n")),(0,o.kt)("p",null,"Since we run the cookiecutter inside a container, the user rights are not correct\nafterwards and have to be changed with ",(0,o.kt)("inlineCode",{parentName:"p"},"sudo chown -R $USER: output/"),"."),(0,o.kt)("p",null,"When you want to Use a stable release this is done via the parameter ",(0,o.kt)("inlineCode",{parentName:"p"},"manager_version"),".\nBy default, this is always set to ",(0,o.kt)("inlineCode",{parentName:"p"},"latest"),". If, for example, the stable release ",(0,o.kt)("inlineCode",{parentName:"p"},"6.0.0"),"\nis to be used, the value for this parameter is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"6.0.0"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"manager_version [latest]: 6.0.0\n")),(0,o.kt)("p",null,"If the ",(0,o.kt)("inlineCode",{parentName:"p"},"manager_version")," parameter is set to a stable release then it is no longer necessary\nto set the ",(0,o.kt)("inlineCode",{parentName:"p"},"ceph_version")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"openstack_version")," parameters. These are then no longer needed.\nThe used versions result from the ",(0,o.kt)("inlineCode",{parentName:"p"},"manager_version"),"."),(0,o.kt)("h3",{id:"post-processing"},"Post-processing"),(0,o.kt)("p",null,"The configuration repository that is initially created with the Cookiecutter is not directly usable.\nFor example, the inventory needs to be built."),(0,o.kt)("p",null,"When you have prepared everything the content generated by the cookiecutter in the ",(0,o.kt)("inlineCode",{parentName:"p"},"output")," directory\nis copied to a new (previously created) Git repository and committed. Be careful not to forget the\n",(0,o.kt)("inlineCode",{parentName:"p"},".gitignore")," file and do not add the ",(0,o.kt)("inlineCode",{parentName:"p"},"secrets")," directory."),(0,o.kt)("h3",{id:"notes"},"Notes"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The password for Ansible Vault encrypted files, ist stored at ",(0,o.kt)("inlineCode",{parentName:"li"},"secrets/vaultpass"),"."),(0,o.kt)("li",{parentName:"ul"},"The password of the generated Keepass file is ",(0,o.kt)("inlineCode",{parentName:"li"},"password"),". This has to be changed.")),(0,o.kt)("h3",{id:"parameters"},"Parameters"),(0,o.kt)("table",null,(0,o.kt)("tr",null,(0,o.kt)("th",null,"Parameter"),(0,o.kt)("th",null,"Description"),(0,o.kt)("th",null,"Default")),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ceph_network_backend")),(0,o.kt)("td",null,"Address range for ceph's backend network"),(0,o.kt)("td",null,(0,o.kt)("code",null,"192.168.80.0/20"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ceph_network_frontend")),(0,o.kt)("td",null,"Address range for ceph's frontend network"),(0,o.kt)("td",null,(0,o.kt)("code",null,"192.168.64.0/20"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ceph_version")),(0,o.kt)("td",null,"The version of Ceph. When using a stable OSISM release (",(0,o.kt)("code",null,"manager_version != latest"),"), this value is ignored."),(0,o.kt)("td",null,(0,o.kt)("code",null,"quincy"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"domain")),(0,o.kt)("td",null,"The domain used by hostnames"),(0,o.kt)("td",null,(0,o.kt)("code",null,"osism.xyz"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"fqdn_external")),(0,o.kt)("td",null,"External API FQDN"),(0,o.kt)("td",null,(0,o.kt)("code",null,"api.osism.xyz"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"fqdn_internal")),(0,o.kt)("td",null,"Internal API FQDN"),(0,o.kt)("td",null,(0,o.kt)("code",null,"api-int.osism.xyz"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"git_host")),(0,o.kt)("td",null,"Address of the used Git server"),(0,o.kt)("td",null,(0,o.kt)("code",null,"github.com"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"git_port")),(0,o.kt)("td",null,"Port of the used Git server"),(0,o.kt)("td",null,(0,o.kt)("code",null,"22"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"git_repository")),(0,o.kt)("td",null,"Path to the git configuration repository"),(0,o.kt)("td",null,(0,o.kt)("code",null,"YOUR_ORG/YOUR_NEW_CONFIGURATION_REPOSITORY"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"git_username")),(0,o.kt)("td",null,"Username of the git repository"),(0,o.kt)("td",null,(0,o.kt)("code",null,"git"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"git_version")),(0,o.kt)("td",null,"Git branch name"),(0,o.kt)("td",null,(0,o.kt)("code",null,"main"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ip_external")),(0,o.kt)("td",null,"The external IP address of the API"),(0,o.kt)("td",null,(0,o.kt)("code",null,"192.168.96.9"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ip_internal")),(0,o.kt)("td",null,"The internal IP address of the API"),(0,o.kt)("td",null,(0,o.kt)("code",null,"192.168.32.9"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"manager_version")),(0,o.kt)("td",null,"The version of OSISM. An overview of available OSISM releases can be found on ",(0,o.kt)("a",{href:"https://release.osism.tech"},"release.osism.tech"),"."),(0,o.kt)("td",null,(0,o.kt)("code",null,"latest"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"name_server")),(0,o.kt)("td",null,"Nameserver. Only one nameserver is set here because the query of multiple values in Cooiecutter is weird. Add more nameservers afterwards."),(0,o.kt)("td",null,(0,o.kt)("code",null,"149.112.112.112"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"ntp_server")),(0,o.kt)("td",null,"NTP server. Only one NTP server is set here because the query of multiple values in Cooiecutter is weird. Add more NTP servers afterwards."),(0,o.kt)("td",null,(0,o.kt)("code",null,"de.pool.ntp.org"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"openstack_version")),(0,o.kt)("td",null,"The version of OpenStack. When using a stable OSISM release (",(0,o.kt)("code",null,"manager_version != latest"),"), this value is ignored."),(0,o.kt)("td",null,(0,o.kt)("code",null,"2023.1"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"project_name")),(0,o.kt)("td",null,"Name of the configuration repository directory"),(0,o.kt)("td",null,(0,o.kt)("code",null,"configuration"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,(0,o.kt)("code",null,"with_ceph")),(0,o.kt)("td",null,"1 to use Ceph, 0 to not use Ceph"),(0,o.kt)("td",null,(0,o.kt)("code",null,"1")))))}p.isMDXComponent=!0}}]);